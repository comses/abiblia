{% extends 'public/base.html' %}

{% load explanation_tile from tags %}

{% block head %}
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
{% endblock %}

{% block breadcrumb %}
{% endblock %}

{% block content %}
    <main role="main">
        <section class="jumbotron py-3 mb-0 text-center">
            <div class="container">
                <h1 class="jumbotron-heading">CoMSES Catalog</h1>
                <p class="lead text-muted">
                    A bibliographic database of <span style="font-weight: 900">{{ n_publications }}</span> agent and
                    individual based
                    models.
                </p>
                <form>
                    <div class="col-md-8 offset-md-2">
                        <div class="form-group">
                            <div class="input-group">
                                <input type="text" class="form-control form-control-lg"
                                       placeholder="Enter search terms here"
                                       aria-label="Search" name="search" id="search">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-primary btn-lg" type="submit">Search</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <p>
                    <a class="btn btn-lg btn-primary" data-toggle="collapse" href="#about" role="button"
                       aria-expanded="false" aria-controls="about">
                        About the Catalog
                    </a>
                </p>
                <div class="collapse" id="about">
                    <div class="card card-body mx-4 text-justify">
                        <p>
                            The CoMSES Catalog is made to discover and improve the state of computational
                            model archiving. Publication information about digital context (e.g. code archive urls,
                            sponsorship, programming platform, documentation) has been added where available.
                        </p>
                        <p>
                            At the moment we focus on agent-based and individual-based models, and publications that are
                            listed in the ISI Web of Science. This allows us to use good quality data to analyze the
                            database and visualize relationships between publications/models.
                        </p>
                        <p>
                            You are invited to explore the database, submit suggestions for publications that you find
                            missing, mistakes you find in the metadata, or explore the landscape of publications via the
                            visualization feature.
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <section class="album">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 bg-white px-0" id="{{ plot.id }}">
                    </div>
                </div>
            </div>
        </section>
        <section class="album py-3 bg-light">
            <div class="container">
                <div class="row">
                    <h1 class="col-12 text-center">Explore</h1>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <a href="{% url 'core:public-search' %}">
                            <div class="text-center"><span class="fas fa-search fa-2x"></span></div>
                            <h3 class="text-center">Search</h3>
                        </a>
                        <p>
                            Need to find an agent or individual based model about a particular topic?
                            You can find papers in the database by searching for keywords and filtering
                            by code availability, author and programming platform.
                        </p>
                    </div>
                    <div class="col-md-6">
                        <a href="{% url 'core:public-visualization' %}">
                            <div class="text-center"><span class="fas fa-chart-line fa-2x"></span></div>
                            <h3 class="text-center">Visualize</h3>
                        </a>
                        <p>
                            Want to figure out how popular particular topics are in agent and individual
                            based modeling? Visualize search queries and get summary plots about publication
                            counts each year, code availability, documentation standards, programming platform
                            and more.
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    {{ plot.data|json_script:plot.data_id }}
    <script>
        const publication_count_plot = JSON.parse(document.getElementById('{{ plot.data_id }}').textContent);
        Plotly.newPlot('{{ plot.id }}',
            publication_count_plot.data,
            publication_count_plot.layout,
            {responsive: true});
    </script>
{% endblock %}